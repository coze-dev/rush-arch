/**
 *  Copyright (c) 2025 coze-dev
 *  SPDX-License-Identifier: MIT
 **/

/* stylelint-disable no-descending-specificity */
/* stylelint-disable selector-class-pattern */
.coz-button {
  @apply border-none;

  cursor: pointer;

  &.semi-button-disabled {
    @apply cursor-not-allowed;
  }

  &.semi-button {
    /* 品牌样式 */
    &.coz-btn-brand {
      @apply coz-mg-hglt-plus coz-fg-hglt-plus;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-plus-hovered;
        }

        &:active {
          @apply coz-mg-hglt-plus-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-hglt-plus-dim coz-mg-hglt-plus-dim;

        &:hover,
        &:active {
          @apply coz-fg-hglt-plus-dim;
        }
      }
    }

    &.coz-btn-highlight {
      @apply coz-mg-hglt coz-fg-hglt;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-hovered;
        }

        &:active {
          @apply coz-mg-hglt-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-hglt-dim coz-mg-hglt;

        &:hover,
        &:active {
          @apply coz-fg-hglt-dim;
        }
      }
    }

    &.coz-btn-primary {
      @apply coz-mg-primary coz-fg-primary;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-primary-hovered;
        }

        &:active {
          @apply coz-mg-primary-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-dim coz-mg-primary;

        &:hover,
        &:active {
          @apply coz-fg-dim;
        }
      }
    }

    &.coz-btn-secondary {
      @apply coz-fg-primary bg-transparent;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-secondary-hovered;
        }

        &:active {
          @apply coz-mg-secondary-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-dim bg-transparent;

        &:hover,
        &:active {
          @apply coz-fg-dim bg-transparent;
        }
      }
    }

    &.coz-btn-yellow {
      @apply coz-mg-hglt-plus-yellow coz-fg-white;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-plus-yellow-hovered;
        }

        &:active {
          @apply coz-mg-hglt-plus-yellow-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-white-dim coz-mg-hglt-plus-yellow-dim;

        &:hover,
        &:active {
          @apply coz-fg-white-dim;
        }
      }
    }

    &.coz-btn-red {
      @apply coz-mg-hglt-plus-red coz-fg-white;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-plus-red-hovered;
        }

        &:active {
          @apply coz-mg-hglt-plus-red-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-white-dim coz-mg-hglt-plus-red-dim;

        &:hover,
        &:active {
          @apply coz-fg-white-dim;
        }
      }
    }

    &.coz-btn-redhglt {
      @apply coz-mg-hglt-red coz-fg-hglt-red;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-red-hovered;
        }

        &:active {
          @apply coz-mg-hglt-red-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-hglt-red-dim coz-mg-hglt-red;

        &:hover,
        &:active {
          @apply coz-fg-hglt-red-dim;
        }
      }
    }

    &.coz-btn-green {
      @apply coz-mg-hglt-plus-green coz-fg-white;

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          @apply coz-mg-hglt-plus-green-hovered;
        }

        &:active {
          @apply coz-mg-hglt-plus-green-pressed;
        }
      }

      &:disabled {
        @apply coz-fg-white-dim coz-mg-hglt-plus-green-dim;

        &:hover,
        &:active {
          @apply coz-fg-white-dim;
        }
      }
    }

    &.coz-btn-ai-plus {
      @apply coz-fg-hglt-plus;

      background: linear-gradient(
        90deg,
        theme('colors.brand.5') 0%,
        theme('colors.purple.5') 100%
      );

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          background: linear-gradient(
            90deg,
            theme('colors.brand.6') 0%,
            theme('colors.purple.6') 100%
          );
        }

        &:active {
          background: linear-gradient(
            90deg,
            theme('colors.brand.7') 0%,
            theme('colors.purple.7') 100%
          );
        }
      }

      &:disabled {
        @apply coz-fg-hglt-plus-dim;

        background: linear-gradient(
          90deg,
          theme('colors.brand.3') 0%,
          theme('colors.purple.3') 100%
        );

        &:hover,
        &:active {
          @apply coz-fg-hglt-plus-dim;
        }
      }
    }

    &.coz-btn-ai-hglt,
    &.coz-btn-ai-primary {
      background: linear-gradient(
        90deg,
        theme('colors.brand.1') 0%,
        theme('colors.purple.1') 100%
      );

      &.semi-button-primary:not(.semi-button-borderless, .semi-button-light) {
        &:hover {
          background: linear-gradient(
            90deg,
            theme('colors.brand.2') 0%,
            theme('colors.purple.2') 100%
          );
        }

        &:active {
          background: linear-gradient(
            90deg,
            theme('colors.brand.3') 0%,
            theme('colors.purple.3') 100%
          );
        }
      }

      .coz-ai-button-text {
        background: linear-gradient(
          90deg,
          theme('colors.brand.5') 0%,
          theme('colors.purple.5') 100%
        );
        background-clip: text;

        -webkit-text-fill-color: transparent;
      }

      &:disabled {
        @apply coz-fg-hglt-dim;

        background: linear-gradient(
          90deg,
          theme('colors.brand.1') 0%,
          theme('colors.purple.1') 100%
        );

        &:hover,
        &:active {
          @apply coz-fg-hglt-dim;
        }

        .coz-ai-button-text {
          background: linear-gradient(
            90deg,
            theme('colors.brand.3') 0%,
            theme('colors.purple.3') 100%
          );
          background-clip: text;

          -webkit-text-fill-color: transparent;
        }
      }
    }

    &.coz-btn-ai-primary {
      background: transparent;

      &:disabled {
        background: transparent;
      }
    }

    /* 加载中状态 */
    .coz-btn-loading {
      animation: semi-animation-rotate 0.6s linear infinite;
      animation-fill-mode: forwards;
    }
  }

  /* 按钮大小 */
  &.coz-btn-large {
    @apply h-large coz-btn-rounded-large px-20px py-9px text-xxl border-0 min-w-large;

    &.semi-button-with-icon-only {
      @apply w-large;
    }

    .semi-button-content-left {
      @apply mr-8px;
    }

    .semi-button-content-right {
      @apply ml-8px;
    }
  }

  &.coz-btn-default {
    @apply h-normal coz-btn-rounded-normal px-16px py-6px text-lg border-0 min-w-normal;

    &.semi-button-with-icon-only {
      @apply w-normal;
    }

    .semi-button-content-left {
      @apply mr-6px;
    }

    .semi-button-content-right {
      @apply ml-8px;
    }
  }

  &.coz-btn-small {
    @apply h-small coz-btn-rounded-small px-8px py-4px text-base border-0 min-w-small;

    &.semi-button-with-icon-only {
      @apply w-small;
    }

    .semi-button-content-left {
      @apply mr-4px;
    }

    .semi-button-content-right {
      @apply ml-4px;
    }
  }

  &.coz-btn-mini {
    @apply h-mini coz-btn-rounded-mini px-5px py-0 text-base border-0 font-normal min-w-mini;

    &.semi-button-with-icon-only {
      @apply w-mini;
    }

    .semi-button-content-left {
      @apply mr-2px;
    }

    .semi-button-content-right {
      @apply ml-2px;
    }
  }
}

.coz-icon-button {
  &.coz-icon-button-large {
    .semi-button-with-icon-only {
      @apply p-[11px];
    }

    .semi-button-content-left {
      @apply mr-8px;
    }

    .semi-button-content-right {
      @apply ml-8px;
    }
  }

  &.coz-icon-button-default {
    .semi-button-with-icon-only {
      @apply p-8px;
    }

    .semi-button-content-left {
      @apply mr-6px;
    }

    .semi-button-content-right {
      @apply ml-6px;
    }
  }

  &.coz-icon-button-small {
    .semi-button-with-icon-only {
      @apply p-5px;
    }

    .semi-button-content-left {
      @apply mr-4px;
    }

    .semi-button-content-right {
      @apply ml-4px;
    }
  }

  &.coz-icon-button-mini {
    .semi-button-with-icon-only {
      @apply p-2px;
    }

    .semi-button-content-left {
      @apply mr-2px;
    }

    .semi-button-content-right {
      @apply ml-2px;
    }
  }
}

.coz-split-button {
  @apply inline-flex items-start;
}

/* 内置badge  */
.coz-btn-large .coz-badge-layout {
  @apply mr-[-3px];
  @apply ml-[11px];
}

.coz-btn-default .coz-badge-layout {
  @apply mr-[-3px];
  @apply ml-[9px];
}

.coz-btn-small .coz-badge-layout {
  @apply mr-[-1px];
  @apply ml-[7px];
}

.coz-btn-brand .coz-badge-layout {
  @apply coz-fg-hglt-plus;
}

.coz-badge.semi-badge.coz-badge-mini {
  &.coz-btn-badge-brand .semi-badge-dot {
    background-color: rgba(var(--coze-fg-5), var(--coze-fg-5-alpha));
  }

  &.coz-btn-badge-hgltplus .semi-badge-dot {
    background-color: rgba(var(--coze-fg-5), var(--coze-fg-5-alpha));
  }

  &.coz-btn-badge-highlight .semi-badge-dot {
    background-color: rgba(var(--coze-brand-5), 1);
  }

  &.coz-btn-badge-primary .semi-badge-dot {
    background-color: rgba(var(--coze-fg-3), var(--coze-fg-3-alpha));
  }

  &.coz-btn-badge-secondary .semi-badge-dot {
    background-color: rgba(var(--coze-fg-3), var(--coze-fg-3-alpha));
  }

  &.coz-btn-badge-yellow .semi-badge-dot {
    background-color: rgba(var(--coze-fg-7), 1);
  }

  &.coz-btn-badge-red .semi-badge-dot {
    background-color: rgba(var(--coze-fg-7), 1);
  }

  &.coz-btn-badge-green .semi-badge-dot {
    background-color: rgba(var(--coze-fg-7), 1);
  }
}

.coz-badge {
  .coz-icon-button + .semi-badge-rightTop:not(.semi-badge-dot) {
    transform: translate(50%, -50%);
  }
}

/* large size */
.coz-icon-button-large + .semi-badge-rightTop {
  /* top right为圆心到右上角的距离，r为圆角的大小 */

  /* r - r / 1.414 */

  /* r为10px */
  top: 2.93px;
  right: 2.93px;
}

/* 没有背景色的适配 */
.coz-icon-button-large.coz-icon-button-secondary + .semi-badge-rightTop {
  top: 10px;
  right: 10px;
}

/* default size */
.coz-icon-button-default + .semi-badge-rightTop {
  /* r为8px */
  top: 2.3px;
  right: 2.3px;
}

/* 没有背景色的适配 */
.coz-icon-button-default.coz-icon-button-secondary + .semi-badge-rightTop {
  top: 7px;
  right: 7px;
}

/* small size */
.coz-icon-button-small + .semi-badge-rightTop {
  /* r为6px */
  top: 1.76px;
  right: 1.76px;
}

/* 没有背景色的适配 */
.coz-icon-button-small.coz-icon-button-secondary + .semi-badge-rightTop {
  top: 4px;
  right: 4px;
}
